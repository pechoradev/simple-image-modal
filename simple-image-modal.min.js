class SimpleImageModal{constructor(t={}){this.options={selector:"img",excludeSelector:null,skipLinkedImages:!0,modalClass:"simple-image-modal",modalContentClass:"simple-image-modal-content",closeButtonClass:"simple-image-modal-close",captionClass:"simple-image-modal-caption",animationDuration:300,closeOnClick:!0,closeOnEsc:!0,showCaption:!0,enableZoom:!0,maxZoom:3,...t};this.modal=null,this.modalImg=null,this.modalCaption=null,this.currentImage=null,this.scale=1,this.isDragging=!1,this.startX=0,this.startY=0,this.translateX=0,this.translateY=0,this.init()}init(){this.createModal(),this.bindEvents()}createModal(){this.modal=document.createElement("div");this.modal.className=this.options.modalClass,this.modal.style.cssText=`\n            display: none;\n            position: fixed;\n            z-index: 9999;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.9);\n            opacity: 0;\n            transition: opacity ${this.options.animationDuration}ms ease;\n            cursor: pointer;\n        `;const t=document.createElement("div");t.className=this.options.modalContentClass,t.style.cssText="\n            position: relative;\n            margin: auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            width: 100%;\n            height: 100%;\n            max-width: 100vw;\n            max-height: 100vh;\n            padding: 20px;\n            box-sizing: border-box;\n        ";const e=document.createElement("div");e.style.cssText="\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            width: 100%;\n            height: 100%;\n            max-width: 100%;\n            max-height: 100%;\n            overflow: hidden;\n        ",this.modalImg=document.createElement("img"),this.modalImg.style.cssText=`\n            max-width: 100%;\n            max-height: 100%;\n            width: auto;\n            height: auto;\n            object-fit: contain;\n            user-select: none;\n            transition: transform ${this.options.animationDuration}ms ease;\n            cursor: ${this.options.enableZoom?"grab":"pointer"};\n            transform-origin: center center;\n        `;const s=document.createElement("span");s.className=this.options.closeButtonClass,s.innerHTML="&times;",s.style.cssText="\n            position: absolute;\n            top: 15px;\n            right: 35px;\n            color: #f1f1f1;\n            font-size: 40px;\n            font-weight: bold;\n            cursor: pointer;\n            transition: 0.3s;\n            z-index: 10000;\n            line-height: 1;\n        ",s.onmouseover=()=>s.style.color="#bbb",s.onmouseout=()=>s.style.color="#f1f1f1",this.modalCaption=document.createElement("div"),this.modalCaption.className=this.options.captionClass,this.modalCaption.style.cssText="\n            margin: 10px auto;\n            color: #fff;\n            text-align: center;\n            font-size: 16px;\n            max-width: 90%;\n            word-wrap: break-word;\n            padding: 0 10px;\n        ",e.appendChild(this.modalImg),t.appendChild(e),t.appendChild(s),t.appendChild(this.modalCaption),this.modal.appendChild(t),document.body.appendChild(this.modal),this.closeBtn=s,this.modalContent=t,this.imageContainer=e}isInsideLink(t){if(!this.options.skipLinkedImages)return!1;const e=t.parentElement;return!!e&&"A"===e.tagName||null!==t.closest("a")}bindEvents(){document.addEventListener("click",t=>{const e=t.target.closest(this.options.selector);if(e&&!this.isExcluded(e)){if(this.isInsideLink(e))return;t.preventDefault(),this.open(e)}}),this.options.closeOnClick&&this.modal.addEventListener("click",t=>{t.target===this.modal&&this.close()}),this.closeBtn.addEventListener("click",()=>this.close()),this.options.closeOnEsc&&document.addEventListener("keydown",t=>{"Escape"===t.key&&this.isOpen()&&this.close()}),this.options.enableZoom&&(this.modalImg.addEventListener("wheel",t=>{t.preventDefault();const e=t.deltaY>0?-.1:.1;this.zoom(e)}),this.modalImg.addEventListener("touchstart",t=>{2===t.touches.length?(t.preventDefault(),this.initialDistance=this.getTouchDistance(t.touches),this.initialScale=this.scale):1===t.touches.length&&this.scale>1&&(this.isDragging=!0,this.startX=t.touches[0].clientX-this.translateX,this.startY=t.touches[0].clientY-this.translateY,this.modalImg.style.cursor="grabbing")}),this.modalImg.addEventListener("touchmove",t=>{if(2===t.touches.length){t.preventDefault();const e=this.getTouchDistance(t.touches),s=(e/this.initialDistance)*this.initialScale;this.scale=Math.min(this.options.maxZoom,Math.max(1,s)),this.updateImageTransform()}else 1===t.touches.length&&this.isDragging&&this.scale>1&&(t.preventDefault(),this.translateX=t.touches[0].clientX-this.startX,this.translateY=t.touches[0].clientY-this.startY,this.updateImageTransform())}),this.modalImg.addEventListener("touchend",t=>{0===t.touches.length&&(this.isDragging=!1,this.modalImg.style.cursor="grab")}),this.modalImg.addEventListener("mousedown",t=>{this.scale>1&&(this.isDragging=!0,this.startX=t.clientX-this.translateX,this.startY=t.clientY-this.translateY,this.modalImg.style.cursor="grabbing")}),document.addEventListener("mousemove",t=>{this.isDragging&&this.scale>1&&(this.translateX=t.clientX-this.startX,this.translateY=t.clientY-this.startY,this.updateImageTransform())}),document.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.modalImg.style.cursor="grab")}),this.modalImg.addEventListener("dblclick",t=>{t.preventDefault(),this.scale>1?this.resetZoom():this.zoom(.5)})),window.addEventListener("resize",()=>{this.isOpen()&&1===this.scale&&this.resetZoom()})}getTouchDistance(t){const e=t[0].clientX-t[1].clientX,s=t[0].clientY-t[1].clientY;return Math.sqrt(e*e+s*s)}isExcluded(t){return!(!this.options.excludeSelector||!t.matches(this.options.excludeSelector))}open(t){if(this.currentImage=t,this.modalImg.src=t.src,this.options.showCaption){const e=t.getAttribute("alt")||t.getAttribute("title")||"";this.modalCaption.textContent=e,this.modalCaption.style.display=e?"block":"none"}this.modal.style.display="flex",setTimeout(()=>{this.modal.style.opacity="1"},10),document.body.style.overflow="hidden"}close(){this.modal.style.opacity="0",setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.resetZoom()},this.options.animationDuration)}isOpen(){return"flex"===this.modal.style.display}zoom(t){this.options.enableZoom&&(this.scale=Math.min(this.options.maxZoom,Math.max(1,this.scale+t)),1===this.scale&&(this.translateX=0,this.translateY=0),this.updateImageTransform())}resetZoom(){this.scale=1,this.translateX=0,this.translateY=0,this.updateImageTransform()}updateImageTransform(){this.modalImg.style.transform=`translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`}updateOptions(t){this.options={...this.options,...t}}destroy(){this.modal&&this.modal.parentNode&&this.modal.parentNode.removeChild(this.modal),document.body.style.overflow=""}}"undefined"!=typeof module&&module.exports?module.exports=SimpleImageModal:"function"==typeof define&&define.amd?define([],function(){return SimpleImageModal}):window.SimpleImageModal=SimpleImageModal;