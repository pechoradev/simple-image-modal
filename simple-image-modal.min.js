class SimpleImageModal{constructor(e={}){this.options={selector:"img",excludeSelector:null,modalClass:"simple-image-modal",modalContentClass:"simple-image-modal-content",closeButtonClass:"simple-image-modal-close",captionClass:"simple-image-modal-caption",animationDuration:300,closeOnClick:!0,closeOnEsc:!0,showCaption:!0,enableZoom:!0,maxZoom:3,...e};this.modal=null,this.modalImg=null,this.modalCaption=null,this.currentImage=null,this.scale=1,this.isDragging=!1,this.startX=0,this.startY=0,this.translateX=0,this.translateY=0,this.init()}init(){this.createModal(),this.bindEvents()}createModal(){this.modal=document.createElement("div");this.modal.className=this.options.modalClass,this.modal.style.cssText=`\n            display: none;\n            position: fixed;\n            z-index: 9999;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.9);\n            opacity: 0;\n            transition: opacity ${this.options.animationDuration}ms ease;\n            cursor: pointer;\n        `;const e=document.createElement("div");e.className=this.options.modalContentClass,e.style.cssText="\n            position: relative;\n            margin: auto;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            width: 90%;\n            height: 90%;\n        ",this.modalImg=document.createElement("img"),this.modalImg.style.cssText=`\n            max-width: 100%;\n            max-height: calc(100% - 60px);\n            object-fit: contain;\n            user-select: none;\n            transition: transform ${this.options.animationDuration}ms ease;\n            cursor: ${this.options.enableZoom?"grab":"pointer"};\n        `;const t=document.createElement("span");t.className=this.options.closeButtonClass,t.innerHTML="&times;",t.style.cssText="\n            position: absolute;\n            top: 15px;\n            right: 35px;\n            color: #f1f1f1;\n            font-size: 40px;\n            font-weight: bold;\n            cursor: pointer;\n            transition: 0.3s;\n            z-index: 10000;\n        ",t.onmouseover=()=>t.style.color="#bbb",t.onmouseout=()=>t.style.color="#f1f1f1",this.modalCaption=document.createElement("div"),this.modalCaption.className=this.options.captionClass,this.modalCaption.style.cssText="\n            margin: 15px auto;\n            color: #fff;\n            text-align: center;\n            font-size: 16px;\n            max-width: 80%;\n        ",e.appendChild(this.modalImg),e.appendChild(t),e.appendChild(this.modalCaption),this.modal.appendChild(e),document.body.appendChild(this.modal),this.closeBtn=t,this.modalContent=e}bindEvents(){document.addEventListener("click",e=>{const t=e.target.closest(this.options.selector);t&&!this.isExcluded(t)&&(e.preventDefault(),this.open(t))}),this.options.closeOnClick&&this.modal.addEventListener("click",e=>{e.target===this.modal&&this.close()}),this.closeBtn.addEventListener("click",()=>this.close()),this.options.closeOnEsc&&document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isOpen()&&this.close()}),this.options.enableZoom&&(this.modalImg.addEventListener("wheel",e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;this.zoom(t)}),this.modalImg.addEventListener("mousedown",e=>{this.scale>1&&(this.isDragging=!0,this.startX=e.clientX-this.translateX,this.startY=e.clientY-this.translateY,this.modalImg.style.cursor="grabbing")}),document.addEventListener("mousemove",e=>{this.isDragging&&this.scale>1&&(this.translateX=e.clientX-this.startX,this.translateY=e.clientY-this.startY,this.updateImageTransform())}),document.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.modalImg.style.cursor="grab")}),this.modalImg.addEventListener("dblclick",()=>{this.resetZoom()}))}isExcluded(e){return!(!this.options.excludeSelector||!e.matches(this.options.excludeSelector))}open(e){if(this.currentImage=e,this.modalImg.src=e.src,this.options.showCaption){const t=e.getAttribute("alt")||e.getAttribute("title")||"";this.modalCaption.textContent=t,this.modalCaption.style.display=t?"block":"none"}this.modal.style.display="flex",setTimeout(()=>{this.modal.style.opacity="1"},10),document.body.style.overflow="hidden"}close(){this.modal.style.opacity="0",setTimeout(()=>{this.modal.style.display="none",document.body.style.overflow="",this.resetZoom()},this.options.animationDuration)}isOpen(){return"flex"===this.modal.style.display}zoom(e){this.options.enableZoom&&(this.scale=Math.min(this.options.maxZoom,Math.max(1,this.scale+e)),1===this.scale&&(this.translateX=0,this.translateY=0),this.updateImageTransform())}resetZoom(){this.scale=1,this.translateX=0,this.translateY=0,this.updateImageTransform()}updateImageTransform(){this.modalImg.style.transform=`translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`}updateOptions(e){this.options={...this.options,...e}}destroy(){this.modal&&this.modal.parentNode&&this.modal.parentNode.removeChild(this.modal),document.body.style.overflow=""}}"undefined"!=typeof module&&module.exports?module.exports=SimpleImageModal:"function"==typeof define&&define.amd?define([],function(){return SimpleImageModal}):window.SimpleImageModal=SimpleImageModal;